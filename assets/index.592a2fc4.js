var e=Object.defineProperty,i=Object.defineProperties,o=Object.getOwnPropertyDescriptors,t=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,c=Object.prototype.propertyIsEnumerable,l=(i,o,t)=>o in i?e(i,o,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[o]=t,a=(e,i)=>{for(var o in i||(i={}))n.call(i,o)&&l(e,o,i[o]);if(t)for(var o of t(i))c.call(i,o)&&l(e,o,i[o]);return e},d=(e,t)=>i(e,o(t));import{g as u,u as r,c as s,d as g}from"./index.20a587cf.js";import{_ as h}from"./dynamic-table.371c2694.js";import{u as p,f as y}from"./utils.d8b24be6.js";import{B as m,A as f,F as j,d as b,r as x,ao as v,b as w,y as z,z as I,e as k,c as q,f as P,W as C,D as M,ay as _,cm as O,bl as S,a7 as V,cn as N,h as R}from"./vendor.5e124c15.js";import{_ as T,I as U,l as B}from"./index.7c366795.js";import D from"./index.17484057.js";import"./node-panel.a196fbc1.js";const F=e=>{switch(e){case 0:return"目录";case 1:return"菜单";case 2:return"权限";default:return""}};var G=[{title:"读取数据库",code:"icon-duqushujuku"},{title:"icon_使用文档",code:"icon-icon_shiyongwendang"},{title:"ant-design",code:"icon-ant-design"},{title:"guide",code:"icon-guide"},{title:"定时任务管理",code:"icon-dingshirenwuguanli"},{title:"监控",code:"icon-jiankong1"},{title:"在线用户监控",code:"icon-zaixianyonghujiankong"},{title:"日志",code:"icon-rizhi1"},{title:"角色权限",code:"icon-jiaosequanxian"},{title:"链接",code:"icon-externa-link"},{title:"柱状图",code:"icon-zhuzhuangtu"},{title:"烛型图",code:"icon-zhuxingtu"},{title:"BUG",code:"icon-BUG"},{title:"桌面",code:"icon-zhuomian"},{title:"组件使用",code:"icon-zujianshiyong"},{title:"资源",code:"icon-ziyuan"},{title:"字段管理",code:"icon-ziduanguanli"},{title:"云",code:"icon-yun"},{title:"分享",code:"icon-fenxiang"},{title:"计算",code:"icon-jisuan"},{title:"客户管理",code:"icon-kehuguanli"},{title:"决策引擎",code:"icon-jueceyinqing"},{title:"流程",code:"icon-liucheng1"},{title:"脚本",code:"icon-jiaoben"},{title:"工程",code:"icon-gongcheng"},{title:"刷子-2",code:"icon-shuazi-2"},{title:"权限",code:"icon-quanxian"},{title:"刷子-1",code:"icon-shuazi-1"},{title:"文件",code:"icon-wenjian"},{title:"文件-增",code:"icon-wenjian-zeng"},{title:"文件-展开",code:"icon-wenjian-zhankai"},{title:"推送",code:"icon-tuisong"},{title:"纸箱",code:"icon-zhixiang"},{title:"运维",code:"icon-yunwei"},{title:"数据库",code:"icon-shujuku1"},{title:"文件-展现",code:"icon-wenjian-zhanxian"},{title:"文档",code:"icon-wendang"},{title:"复制",code:"icon-fuzhi"},{title:"用户",code:"icon-yonghu1"},{title:"放大",code:"icon-fangda"},{title:"减少",code:"icon-jianshao"},{title:"编辑",code:"icon-bianji"},{title:"缩小",code:"icon-suoxiao"},{title:"删除",code:"icon-shanchu"},{title:"矩形-错误",code:"icon-juxing-cuowu"},{title:"矩形-减",code:"icon-juxing-jian"},{title:"矩形-更多",code:"icon-juxing-gengduo"},{title:"矩形-增",code:"icon-juxing-zeng"},{title:"矩形-右",code:"icon-juxing-you"},{title:"矩形-文本",code:"icon-juxing-wenben"},{title:"矩形-通过",code:"icon-juxing-tongguo"},{title:"圆环-更多",code:"icon-yuanhuan-gengduo"},{title:"圆环-确认",code:"icon-yuanhuan-queren"},{title:"圆环-关闭",code:"icon-yuanhuan-guanbi"},{title:"圆环-减",code:"icon-yuanhuan-jian"},{title:"圆环-消息",code:"icon-yuanhuan-xiaoxi"},{title:"圆环-增",code:"icon-yuanhuan-zeng"},{title:"圆环-暂停",code:"icon-yuanhuan-zanting"},{title:"圆环-左",code:"icon-yuanhuan-zuo"},{title:"矩形-左",code:"icon-juxing-zuo"},{title:"圆环-时间",code:"icon-yuanhuan-shijian"},{title:"圆环-疑问",code:"icon-yuanhuan-yiwen"},{title:"圆环-右",code:"icon-yuanhuan-you"},{title:"圆环-减",code:"icon-yuanhuan-jian1"},{title:"矩形-右",code:"icon-juxing-you1"},{title:"矩形-通过",code:"icon-juxing-tongguo1"},{title:"矩形-错误",code:"icon-juxing-cuowu1"},{title:"矩形-减",code:"icon-juxing-jian1"},{title:"矩形-增",code:"icon-juxing-zeng1"},{title:"圆环-增",code:"icon-yuanhuan-zeng1"},{title:"圆环-左",code:"icon-yuanhuan-zuo1"},{title:"圆环-右",code:"icon-yuanhuan-you1"},{title:"圆环-关闭",code:"icon-yuanhuan-guanbi1"},{title:"矩形-左",code:"icon-juxing-zuo1"},{title:"圆环-确认",code:"icon-yuanhuan-queren1"},{title:"圆环-暂停",code:"icon-yuanhuan-zanting1"},{title:"后退",code:"icon-houtui"},{title:"方向上",code:"icon-fangxiangshang"},{title:"方向右",code:"icon-fangxiangyou"},{title:"方向下",code:"icon-fangxiangxia"},{title:"菜单左",code:"icon-caidanzuo"},{title:"快进",code:"icon-kuaijin"},{title:"上传",code:"icon-shangchuan1"},{title:"下载",code:"icon-xiazai1"},{title:"替换",code:"icon-tihuan"},{title:"方向左",code:"icon-fangxiangzuo"},{title:"收缩",code:"icon-shousuo"},{title:"菜单右",code:"icon-caidanyou"},{title:"展开",code:"icon-zhankai"},{title:"警告",code:"icon-jinggao"},{title:"提醒-警告",code:"icon-tixing-jinggao"},{title:"错误",code:"icon-cuowu"},{title:"对话-警告",code:"icon-duihua-jinggao"},{title:"同盾",code:"icon-tongdun"},{title:"调用",code:"icon-tiaoyong"},{title:"日志",code:"icon-rizhi"},{title:"日志-2",code:"icon-rizhi-2"},{title:"饼图",code:"icon-bingtu"},{title:"案件管理",code:"icon-anjianguanli"},{title:"布局",code:"icon-buju"},{title:"保存",code:"icon-baocun"},{title:"定位",code:"icon-dingwei"},{title:"灯泡",code:"icon-dengpao"},{title:"短信保护",code:"icon-duanxinbaohu"},{title:"导出",code:"icon-daochu"},{title:"安全",code:"icon-anquan"},{title:"分组",code:"icon-fenzu"},{title:"购物",code:"icon-gouwu"},{title:"表格",code:"icon-biaoge"},{title:"导入",code:"icon-daoru"},{title:"公告",code:"icon-gonggao"},{title:"对话-2",code:"icon-duihua-2"},{title:"关系图",code:"icon-guanxitu"},{title:"对话",code:"icon-duihua"},{title:"服务器",code:"icon-fuwuqi"},{title:"复杂网络",code:"icon-fuzawangluo"},{title:"标签",code:"icon-biaoqian"},{title:"工具",code:"icon-gongju"},{title:"建模-减",code:"icon-jianmo-jian"},{title:"监控",code:"icon-jiankong"},{title:"解锁",code:"icon-jiesuo"},{title:"建模",code:"icon-jianmo"},{title:"缓存",code:"icon-huancun"},{title:"尽调精灵",code:"icon-jintiaojingling"},{title:"建模-增",code:"icon-jianmo-zeng"},{title:"卡片",code:"icon-kapian"},{title:"警报-2",code:"icon-jingbao-2"},{title:"流程",code:"icon-liucheng"},{title:"计费管理",code:"icon-jifeiguanli"},{title:"链接",code:"icon-lianjie"},{title:"接入管理",code:"icon-jieruguanli"},{title:"警报",code:"icon-jingbao"},{title:"录音",code:"icon-luyin"},{title:"雷达图",code:"icon-leidatu"},{title:"密码",code:"icon-mima"},{title:"流量",code:"icon-liuliang"},{title:"倒计时",code:"icon-daojishi"},{title:"回收",code:"icon-huishou"},{title:"任务",code:"icon-renwu"},{title:"日历",code:"icon-rili"},{title:"散点图",code:"icon-sandiantu"},{title:"内容安全",code:"icon-neironganquan"},{title:"漏斗图",code:"icon-loudoutu"},{title:"情报监控",code:"icon-qingbaojiankong"},{title:"模型管理",code:"icon-moxingguanli"},{title:"企智查",code:"icon-qizhicha"},{title:"上传",code:"icon-shangchuan"},{title:"书签",code:"icon-shuqian"},{title:"数据",code:"icon-shuju"},{title:"收藏",code:"icon-shoucang"},{title:"设置",code:"icon-shezhi"},{title:"视觉关闭",code:"icon-shijueguanbi"},{title:"视觉显示",code:"icon-shijuexianshi"},{title:"首页",code:"icon-shouye"},{title:"提醒",code:"icon-tixing"},{title:"刷新-2",code:"icon-shuaxin-2"},{title:"搜索",code:"icon-sousuo"},{title:"通道",code:"icon-tongdao"},{title:"条形图",code:"icon-tiaoxingtu"},{title:"刷新",code:"icon-shuaxin"},{title:"数据库",code:"icon-shujuku"},{title:"图像",code:"icon-tuxiang"},{title:"文件同步",code:"icon-wenjiantongbu"},{title:"相机",code:"icon-xiangji"},{title:"箱型图",code:"icon-xiangxingtu"},{title:"文件搜索",code:"icon-wenjiansousuo"},{title:"统计",code:"icon-tongji"},{title:"项目",code:"icon-xiangmu"},{title:"验证码",code:"icon-yanzhengma"},{title:"信息校验",code:"icon-xinxixiaoyan"},{title:"下载",code:"icon-xiazai"},{title:"移动端",code:"icon-yidongduan"},{title:"信贷服务",code:"icon-xindaifuwu"},{title:"邮件",code:"icon-youjian"},{title:"业务指标",code:"icon-yewuzhibiao"},{title:"用户",code:"icon-yonghu"},{title:"仪表盘",code:"icon-yibiaopan"},{title:"应用中心",code:"icon-yingyongzhongxin"},{title:"账户安全",code:"icon-zhanghuanquan"},{title:"折线图",code:"icon-zhexiantu"}];const A={class:"select-box"},W=["title","onClick"];var $=T(b({props:{value:{default:""},placeholder:{default:"请选择"}},emits:["update:value"],setup(e,{emit:i}){const o=e,t=x(!1),n=v(o,"value",i);return(i,o)=>{const c=V;return w(),z(M(S),{visible:t.value,"onUpdate:visible":o[1]||(o[1]=e=>t.value=e),placement:"bottomLeft",trigger:"focus"},{content:I((()=>[k("div",A,[(w(!0),q(j,null,P(M(G),(e=>(w(),q("div",{key:e.code,title:e.title,class:C(["select-box-item",{active:M(n)==e.code}]),onClick:i=>(e=>{n.value=e.code,t.value=!1})(e)},[m(M(U),{type:e.code,size:"20"},null,8,["type"])],10,W)))),128))])])),default:I((()=>[m(c,{value:M(n),"onUpdate:value":o[0]||(o[0]=e=>O(n)?n.value=e:null),placeholder:e.placeholder},_({_:2},[M(n)?{name:"prefix",fn:I((()=>[m(M(U),{type:M(n),size:"22"},null,8,["type"])]))}:void 0]),1032,["value","placeholder"])])),_:1},8,["visible"])}}}),[["__scopeId","data-v-6c4abe36"]]);const E=[{field:"type",component:"RadioGroup",label:"菜单类型",defaultValue:0,rules:[{required:!0,type:"number"}],componentProps:{options:[{label:"目录",value:0},{label:"菜单",value:1},{label:"权限",value:2}]}},{field:"name",component:"Input",label:"节点名称",rules:[{required:!0,type:"string"}]},{field:"parentId",component:"TreeSelect",label:"上级节点",componentProps:{fieldNames:{label:"name",value:"id"},getPopupContainer:()=>document.body},rules:[{required:!0,type:"number"}]},{field:"router",component:"Input",label:"节点路由",vIf:({formModel:e})=>2!==e.type,rules:[{required:!0,type:"string"}]},{field:"perms",component:N(D),label:"权限",vIf:({formModel:e})=>2===e.type,rules:[{required:!0,type:"array",message:"请选择权限"}]},{field:"icon",component:N($),label:"节点图标",vIf:({formModel:e})=>2!==e.type},{field:"viewPath",component:"Select",label:"节点路径",vIf:({formModel:e})=>1===e.type,componentProps:{options:Object.keys(B).map((e=>({label:e,value:e})))}},{field:"keepalive",component:"Switch",label:"是否缓存",defaultValue:!0,vIf:({formModel:e})=>1===e.type},{field:"isShow",component:"Switch",label:"是否显示",defaultValue:!0,vIf:({formModel:e})=>2!==e.type},{field:"orderNum",component:"InputNumber",label:"排序号",defaultValue:255,componentProps:{style:{width:"100%"}}}],L=R(" 新增 "),H=b(d(a({},{name:"SysMenu"}),{setup(e){const i=x([]),o=x(),[t]=p(),n=async()=>{const e=await u();return i.value=y(e.filter((e=>2!==e.type)),null),{list:y(e,null)}},c=async e=>{var n,c,l,u;const[g]=await t({modalProps:{title:(e.id?"编辑":"新增")+"菜单",width:700,onFinish:async i=>{var t,n;console.log("新增/编辑菜单",i),i.menuId=e.id,i.perms=null==(t=i.perms)?void 0:t.join(","),await(e.id?r:s)(i),null==(n=o.value)||n.refreshTable()}},formSchema:{labelWidth:100,layout:"vertical",schemas:E}});null==(n=g.value)||n.updateSchema([{field:"parentId",componentProps:{treeData:[{key:-1,name:"一级菜单",children:i.value}]}}]),null==(u=g.value)||u.setFieldsValue(d(a({},e),{perms:null==(c=e.perms)?void 0:c.split(","),parentId:null!=(l=e.parentId)?l:-1}))},l=(e=>{const{delRowConfirm:i,openMenuModal:o}=e;return[{title:"名称",dataIndex:"name"},{title:"图标",width:80,dataIndex:"icon",align:"center",bodyCell:({record:e})=>m(j,null,[e.icon&&m(f("icon-font"),{type:e.icon,size:"22"},null)])},{title:"类型",width:80,align:"center",dataIndex:"type",bodyCell:({record:e})=>m(j,null,[F(e.type)])},{title:"节点路由",dataIndex:"router",align:"center",width:240},{title:"路由缓存",dataIndex:"keepalive",align:"center",width:80},{title:"文件路径",width:280,align:"center",dataIndex:"viewPath"},{title:"权限",width:300,align:"center",dataIndex:"perms"},{title:"排序号",width:80,align:"center",dataIndex:"orderNum"},{title:"更新时间",width:180,align:"center",dataIndex:"updatedAt"},{title:"操作",width:160,dataIndex:"$action",hideInSearch:!0,align:"center",fixed:"right",actions:({record:e})=>[{label:"编辑",auth:{perm:"sys/menu/update",effect:"disable"},onClick:()=>o(e)},{label:"删除",auth:"sys/menu/delete",popConfirm:{title:"你确定要删除吗？",onConfirm:()=>i(e)}}]}]})({openMenuModal:c,delRowConfirm:async e=>{var i;await g({menuId:e.id}),null==(i=o.value)||i.refreshTable()}});return(e,i)=>{const t=f("a-button");return w(),q("div",null,[m(M(h),{ref_key:"dynamicTableRef",ref:o,"row-key":"id","header-title":"菜单管理","data-request":n,columns:M(l),bordered:"",size:"small",search:!1,pagination:!1,scroll:{x:2e3}},{toolbar:I((()=>[m(t,{type:"primary",disabled:!e.$auth("sys/menu/add"),onClick:i[0]||(i[0]=e=>c({}))},{default:I((()=>[L])),_:1},8,["disabled"])])),_:1},8,["columns"])])}}}));export{H as default};
