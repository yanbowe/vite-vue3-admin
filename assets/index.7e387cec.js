import{b as e,c as a,w as l,v as t,e as n,p as s,g as o,d as u,L as i,J as c,k as d,l as r,a3 as p,aI as m,A as v,B as f,z as y,D as h,aJ as k,aK as _,aL as g,aM as b,aN as C,aO as K,Z as P,F as I,f as w,y as T,aP as q,aQ as x,t as S,aR as L,S as O,C as j,K as E,h as A,s as F,aS as M,aT as N,aE as U,a5 as z,N as R,r as B,aU as J,aV as $,aW as W,aX as D,P as H,aY as V,aZ as Z,a4 as Q,a_ as X,a$ as Y,ay as G,at as ee,am as ae,b0 as le,b1 as te,b2 as ne,M as se,b3 as oe,b4 as ue,b5 as ie}from"./vendor.5e124c15.js";import{_ as ce,u as de,S as re,T as pe,I as me,a as ve,b as fe}from"./index.7c366795.js";/* empty css              *//* empty css               */const ye={class:"logo"},he=(e=>(s("data-v-4ea3708a"),e=e(),o(),e))((()=>n("img",{src:"/vite-vue3-admin/assets/logo.3503d5cd.png",alt:""},null,-1))),ke={class:"title"};var _e=ce({props:{collapsed:{type:Boolean}},setup:s=>(o,u)=>(e(),a("div",ye,[he,l(n("h2",ke,"One Piece",512),[[t,!s.collapsed]])]))},[["__scopeId","data-v-4ea3708a"]]);const ge={class:"tabs-view"},be={style:{display:"inline-block"}},Ce=A(" 刷新 "),Ke=A(" 关闭 "),Pe=A(" 关闭左侧 "),Ie=A(" 关闭右侧 "),we=A(" 关闭其他 "),Te=A(" 关闭全部 "),qe=A(" 刷新 "),xe=A(" 关闭 "),Se=A(" 关闭其他 "),Le=A(" 关闭全部 "),Oe={class:"tabs-view-content"};var je=ce(u({setup(l){const t=i(),s=c(),o=de(),u=["Redirect","login"],A=d({activeKey:t.fullPath}),z=r((()=>o.tabsList)),R=r((()=>o.keepAliveComponents)),B=e=>{const{fullPath:a,hash:l,meta:t,name:n,params:s,path:o,query:u}=e;return{fullPath:a,hash:l,meta:t,name:n,params:s,path:o,query:u}};let J=[];try{const e=re.get(pe);J=e?JSON.parse(e):[B(t)]}catch(X){J=[B(t)]}o.initTabs(J);const $=()=>{var e,a;if(t.meta.keepAlive){const l=null==(a=null==(e=s.currentRoute.value.matched.find((e=>e.name==t.name)))?void 0:e.components)?void 0:a.default.name;l&&o.setKeepAliveComponents(o.keepAliveComponents.filter((e=>e!=l)))}};p((()=>t.fullPath),(()=>{const e=[];z.value.forEach((a=>{a.name&&!s.hasRoute(a.name)&&e.push(a.name)})),e.length&&o.initTabs(z.value.filter((a=>!e.includes(a.name))))})),p((()=>t.fullPath),(e=>{u.includes(t.name)||(A.activeKey=e,o.addTabs(B(t)))}),{immediate:!0}),window.addEventListener("beforeunload",(()=>{re.set(pe,JSON.stringify(z.value))}));const W=e=>{if(1===z.value.length)return F.warning("这已经是最后一页，不能再关闭了！");if($(),o.closeCurrentTab(e),A.activeKey===e.fullPath){const e=z.value[Math.max(0,z.value.length-1)];A.activeKey=e.fullPath,s.push(e)}},D=(e,a)=>{"remove"==a&&W(z.value.find((a=>a.fullPath==e)))},H=e=>{A.activeKey=e,s.push(e)},V=()=>{$(),s.push({path:"/redirect"+h(t).fullPath})};m("reloadPage",V);const Z=e=>{o.closeOtherTabs(e),A.activeKey=e.fullPath,s.replace(e.fullPath)},Q=()=>{localStorage.removeItem("routes"),o.closeAllTabs(),s.replace("/")};return(l,u)=>{const i=M,c=N,d=U,r=v("router-view");return e(),a("div",ge,[f(h(L),{activeKey:h(A).activeKey,"onUpdate:activeKey":u[3]||(u[3]=e=>h(A).activeKey=e),"hide-add":"",type:"editable-card",class:"tabs",onChange:H,onEdit:D},{rightExtra:y((()=>[f(h(k),{trigger:["click"]},{overlay:y((()=>[f(d,{style:{"user-select":"none"}},{default:y((()=>[f(i,{key:"1",disabled:h(A).activeKey!==h(t).fullPath,onClick:V},{default:y((()=>[f(h(_)),qe])),_:1},8,["disabled"]),f(i,{key:"2",onClick:u[1]||(u[1]=e=>W(h(t)))},{default:y((()=>[f(h(g)),xe])),_:1}),f(c),f(i,{key:"5",onClick:u[2]||(u[2]=e=>Z(h(t)))},{default:y((()=>[f(h(b)),Se])),_:1}),f(i,{key:"6",onClick:Q},{default:y((()=>[f(h(C)),Le])),_:1})])),_:1})])),default:y((()=>[n("a",{class:"ant-dropdown-link",onClick:u[0]||(u[0]=P((()=>{}),["prevent"]))},[f(h(K),{style:{fontSize:"20px"}})])])),_:1})])),default:y((()=>[(e(!0),a(I,null,w(h(z),(a=>(e(),T(h(L).TabPane,{key:a.fullPath},{tab:y((()=>[f(h(k),{trigger:["contextmenu"]},{overlay:y((()=>[f(d,{style:{"user-select":"none"}},{default:y((()=>[f(i,{key:"1",disabled:h(A).activeKey!==a.fullPath,onClick:V},{default:y((()=>[f(h(_)),Ce])),_:2},1032,["disabled"]),f(i,{key:"2",onClick:e=>W(a)},{default:y((()=>[f(h(g)),Ke])),_:2},1032,["onClick"]),f(c),f(i,{key:"3",onClick:e=>{return l=a,o.closeLeftTabs(l),A.activeKey=l.fullPath,void s.replace(l.fullPath);var l}},{default:y((()=>[f(h(q)),Pe])),_:2},1032,["onClick"]),f(i,{key:"4",onClick:e=>{return l=a,o.closeRightTabs(l),A.activeKey=l.fullPath,void s.replace(l.fullPath);var l}},{default:y((()=>[f(h(x)),Ie])),_:2},1032,["onClick"]),f(c),f(i,{key:"5",onClick:e=>Z(a)},{default:y((()=>[f(h(b)),we])),_:2},1032,["onClick"]),f(i,{key:"6",onClick:Q},{default:y((()=>[f(h(C)),Te])),_:1})])),_:2},1024)])),default:y((()=>{var e,l;return[n("div",be,S((l=null==(e=a.meta)?void 0:e.title,"string"==typeof l?l:null==l?void 0:l.zh_CN)),1)]})),_:2},1024)])),_:2},1024)))),128))])),_:1},8,["activeKey"]),n("div",Oe,[f(r,null,{default:y((({Component:a})=>[(e(),T(E,{include:h(R)},[(e(),T(O,null,{default:y((()=>[(e(),T(j(a)))])),_:2},1024))],1032,["include"]))])),_:1})])])}}}),[["__scopeId","data-v-5119c72a"]]);const Ee=u({props:{menuInfo:{type:Object}},setup(l){const t=l,s=e=>"string"==typeof e?e:null==e?void 0:e.zh_CN;return(l,o)=>{var u,i,c,d,r,p;const m=M,k=v("menu-item",!0);return(null==(i=null==(u=t.menuInfo)?void 0:u.meta)?void 0:i.hideInMenu)?R("",!0):(e(),a(I,{key:0},[(null==(d=null==(c=t.menuInfo)?void 0:c.children)?void 0:d.length)?(e(),T(h(U).SubMenu,z({key:0,key:null==(r=t.menuInfo)?void 0:r.name},l.$attrs),{title:y((()=>{var e,a;return[n("span",null,[f(h(me),{type:null==(e=t.menuInfo.meta)?void 0:e.icon},null,8,["type"]),n("span",null,S(s(null==(a=t.menuInfo.meta)?void 0:a.title)),1)])]})),default:y((()=>{var l;return[(e(!0),a(I,null,w(null==(l=t.menuInfo)?void 0:l.children,(l=>(e(),a(I,{key:l.name},[l.children?(e(),T(k,{key:l.name,"menu-info":l},null,8,["menu-info"])):(e(),T(m,{key:l.name},{default:y((()=>{var e,a;return[f(h(me),{type:null==(e=l.meta)?void 0:e.icon},null,8,["type"]),n("span",null,S(s(null==(a=l.meta)?void 0:a.title)),1)]})),_:2},1024))],64)))),128))]})),_:1},16)):(e(),T(h(U).Item,{key:null==(p=t.menuInfo)?void 0:p.name},{default:y((()=>{var e,a,l,o;return[f(h(me),{type:null==(a=null==(e=t.menuInfo)?void 0:e.meta)?void 0:a.icon},null,8,["type"]),n("span",null,S(s(null==(o=null==(l=t.menuInfo)?void 0:l.meta)?void 0:o.title)),1)]})),_:1}))],64))}}});var Ae=ce(u({props:{collapsed:{type:Boolean}},setup(l){const t=l,n=ve(),s=i(),o=c(),u=r((()=>n.menus)),m=()=>{var e,a;return null!=(a=null==(e=s.meta)?void 0:e.keyPath)?a:s.matched.slice(1).map((e=>e.name))},v=d({openKeys:m(),selectedKeys:[s.name]});p((()=>t.collapsed),(e=>{v.openKeys=e?[]:m(),v.selectedKeys=[s.name]})),p((()=>s.fullPath),(()=>{"login"==s.name||t.collapsed||(v.openKeys=m(),v.selectedKeys=[s.name])}));const f=({key:e})=>{e!==s.name&&(/http(s)?:/.test(e)?window.open(e):o.push({name:e}))};return(l,n)=>{const s=U;return e(),T(s,{"open-keys":h(v).openKeys,"onUpdate:open-keys":n[0]||(n[0]=e=>h(v).openKeys=e),"selected-keys":h(v).selectedKeys,"onUpdate:selected-keys":n[1]||(n[1]=e=>h(v).selectedKeys=e),mode:"inline",theme:"dark","inline-collapsed":t.collapsed,class:"menu-container",onClick:f},{default:y((()=>[(e(!0),a(I,null,w(h(u),(a=>(e(),T(Ee,{key:a.name,"menu-info":a},null,8,["menu-info"])))),128))])),_:1},8,["open-keys","selected-keys","inline-collapsed"])}}}),[["__scopeId","data-v-6cf0c40e"]]);const Fe={class:"left-options"},Me={class:"right-options"},Ne=(e=>(s("data-v-e069cea2"),e=e(),o(),e))((()=>n("div",null,"个人中心",-1))),Ue=["onClick"],ze=A(" 退出登录");var Re=ce(u({props:{collapsed:{type:Boolean}},emits:["update:collapsed"],setup(l,{emit:t}){const s=ve(),o=fe(),u=B(Z),d=c(),p=i(),m=r((()=>s.name)),v=({key:e})=>{e!==p.name&&(/http(s)?:/.test(e)?window.open(e):d.push({name:e}))},_=()=>{Q.confirm({title:"您确定要退出登录吗？",icon:f(X,null,null),onOk:async()=>{"13553550634"!==s.userInfo.phone&&await s.logout(),F.success("成功退出登录"),localStorage.clear(),d.replace({name:"login",query:{redirect:p.fullPath}})}})};document.addEventListener("fullscreenchange",(()=>{u.value=null!==document.fullscreenElement?Y:Z}));const g=()=>{document.fullscreenElement?document.exitFullscreen&&document.exitFullscreen():document.documentElement.requestFullscreen()},b=[{icon:le,tips:"搜索"},{icon:te,tips:"github",eventObject:{click:()=>window.open("https://github.com/buqiyuan/vite-vue3-admin")}},{icon:ne,tips:"网站设置"},{icon:se,tips:"锁屏",eventObject:{click:()=>o.setLock(!0)}}],C=e=>"string"==typeof e?e:null==e?void 0:e.zh_CN;return(s,o)=>{const i=M,c=U;return e(),T(h(V).Header,{class:"layout-header"},{default:y((()=>[n("div",Fe,[n("span",{class:"menu-fold",onClick:o[0]||(o[0]=()=>t("update:collapsed",!l.collapsed))},[(e(),T(j(l.collapsed?h(J):h($))))]),f(h(W),null,{default:y((()=>[(e(!0),a(I,null,w(s.$route.matched,((l,t)=>(e(),T(h(W).Item,{key:l.name},G({default:y((()=>[n("span",null,S(C(l.meta.title)),1)])),_:2},[l.children.length?{name:"overlay",fn:y((()=>{var o;return[f(c,{selectedKeys:[null==(o=s.$route.matched[t+1])?void 0:o.name],onClick:v},{default:y((()=>[(e(!0),a(I,null,w(l.children,(l=>{var t;return e(),a(I,null,[(null==(t=l.meta)?void 0:t.hideInMenu)?R("",!0):(e(),T(i,{key:l.name},{default:y((()=>{var e;return[n("span",null,S(C(null==(e=l.meta)?void 0:e.title)),1)]})),_:2},1024))],64)})),256))])),_:2},1032,["selectedKeys"])]}))}:void 0]),1024)))),128))])),_:1})]),n("div",Me,[(e(),a(I,null,w(b,(a=>f(h(ae),{key:a.icon.name,placement:"bottom"},{title:y((()=>[n("span",null,S(a.tips),1)])),default:y((()=>[(e(),T(j(a.icon),ee(a.eventObject||{}),null,16))])),_:2},1024))),64)),(e(),T(j(u.value),{onClick:g})),f(h(k),null,{overlay:y((()=>[f(h(U),null,{default:y((()=>[f(h(U).Item,null,{default:y((()=>[Ne])),_:1}),f(h(U).Divider),f(h(U).Item,null,{default:y((()=>[n("div",{onClick:P(_,["prevent"])},[f(h(D)),ze],8,Ue)])),_:1})])),_:1})])),default:y((()=>[f(h(H),null,{default:y((()=>[A(S(h(m)),1)])),_:1})])),_:1})])])),_:1})}}}),[["__scopeId","data-v-e069cea2"]]);var Be="_page_footer_auaql_1",Je="_page_footer_link_auaql_7",$e="_copyright_auaql_15";const{Footer:We}=V;var De=u({name:"PageFooter",components:{ALayoutFooter:We},setup:()=>()=>f(I,null,[f(v("a-layout-footer"),{class:Be},{default:()=>[f("div",{class:Je},[f("a",{href:"https://github.com/vuejs/vue-next",target:"_blank"},[A("vue 3.0")]),f("a",{href:"https://github.com/buqiyuan",target:"_blank"},[f(te,null,null)]),f("a",{href:"https://github.com/vueComponent/ant-design-vue",target:"_blank"},[" ",A("ant-design-vue 2.0")])]),f("div",{class:$e},[A("Copyright "),f(oe,null,null),A(" 2020"),f("a",{href:"https://buqiyuan.gitee.io",target:"_blank"},[A("buqiyuan.gitee.io")])])]})])});var He=ce(u({name:"LayoutComp",components:{TabsView:je,PageHeader:Re,AsideMenu:Ae,Logo:_e,PageFooter:De,[V.name]:V,[V.Content.name]:V.Content,[V.Sider.name]:V.Sider},setup(){const e=B(!1),a=r((()=>e.value?80:208));return{collapsed:e,asiderWidth:a}}}),[["render",function(a,l,t,n,s,o){const u=v("logo"),i=v("aside-menu"),c=ue,d=v("page-header"),r=v("tabs-view"),p=ie,m=v("page-footer"),h=V;return e(),T(h,{class:"layout"},{default:y((()=>[f(c,{collapsed:a.collapsed,"onUpdate:collapsed":l[0]||(l[0]=e=>a.collapsed=e),width:a.asiderWidth,trigger:null,collapsible:"",class:"layout-sider"},{default:y((()=>[f(u,{collapsed:a.collapsed},null,8,["collapsed"]),f(i,{collapsed:a.collapsed},null,8,["collapsed"])])),_:1},8,["collapsed","width"]),f(h,null,{default:y((()=>[f(d,{collapsed:a.collapsed,"onUpdate:collapsed":l[1]||(l[1]=e=>a.collapsed=e)},null,8,["collapsed"]),f(p,{class:"layout-content"},{default:y((()=>[f(r)])),_:1}),f(m)])),_:1})])),_:1})}],["__scopeId","data-v-45f52163"]]);export{He as default};
