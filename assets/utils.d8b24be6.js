var e=Object.defineProperty,l=Object.defineProperties,r=Object.getOwnPropertyDescriptors,a=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,t=Object.prototype.propertyIsEnumerable,o=(l,r,a)=>r in l?e(l,r,{enumerable:!0,configurable:!0,writable:!0,value:a}):l[r]=a,i=(e,l)=>{for(var r in l||(l={}))n.call(l,r)&&o(e,r,l[r]);if(a)for(var r of a(l))t.call(l,r)&&o(e,r,l[r]);return e};import{n as s,h as c}from"./index.7c366795.js";import{r as u,B as d,aA as v}from"./vendor.5e124c15.js";const m=()=>{const{show:e}=s();return[async({modalProps:a,formSchema:n})=>{const t=u();var o,s;return await e((o=i({destroyOnClose:!0},a),s={onCancel:e=>{var l,r;null==(l=t.value)||l.resetFields(),null==(r=null==a?void 0:a.onCancel)||r.call(a,e)},content:()=>d(c,{ref:t,formSchema:n},null),onOk:async()=>{var e,l,r,n,o;const s=(null==(e=t.value)?void 0:e.formModel)||{};try{await(null==(l=t.value)?void 0:l.validate()),await(null==(r=null==a?void 0:a.onFinish)?void 0:r.call(a,i({},s))),null==(n=t.value)||n.resetFields()}catch(c){return null==(o=null==a?void 0:a.onFail)||o.call(a,i({},s)),Promise.reject(c)}}},l(o,r(s)))),await v(),[t]}]},p=(e,l=null)=>e.filter((e=>e.parentId===l)).map((l=>{const r=p(e,l.id);return Object.assign(l,{title:l.name,key:l.id,value:l.id,formData:l,children:r.length?r:null})})),f=(e,l=null)=>e.filter((e=>e.parentId===l)).map((l=>{const r=f(e,l.id);return Object.assign(l,{title:l.name,key:l.id,value:l.id,formData:l,children:r.length?r:null})}));export{p as a,f,m as u};
