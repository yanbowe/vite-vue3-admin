import{d as e,ao as l,r as a,as as n,l as s,a3 as o,b as t,y as u,z as r,B as c,e as i,ay as d,D as v,c as h,f as p,ck as m,Z as f,h as g,t as k,F as b,cf as C,a7 as _,bl as y}from"./vendor.5e124c15.js";import{_ as x,o as j}from"./index.7c366795.js";import{N as F,u as I}from"./node-panel.a196fbc1.js";const R={class:"input-box"};var q=x(e({props:{value:{type:Array,default:()=>[],isRequired:!0}},emits:["update:value"],setup(e,{emit:x}){const q=l(e,"value",x),z=a(),A=a(j()),B=n.useInjectFormItemContext(),D=(e,l=[])=>e.reduce(((e,l)=>{var a,n;return!(null==(a=l.children)?void 0:a.length)&&l.checked&&l.value&&e.push({label:l.value,value:l.value,node:l}),(null==(n=l.children)?void 0:n.length)&&D(l.children,e),e}),l),E=e=>{const l=e=>e.some((e=>{var a;return!!q.value.includes(e.value)||!!(null==(a=e.children)?void 0:a.length)&&l(e.children)})),a=(e,n=null)=>{null==e||e.forEach((e=>{var s,o;(null==(s=e.children)?void 0:s.length)&&a(e.children,e),e.parent=n,e.indeterminate=!1,e.checked=q.value.includes(e.value),(null==(o=e.children)?void 0:o.length)&&(e.indeterminate=l(e.children))}))};a(e)};E(A.value);const L=()=>{q.value=[],setTimeout((()=>{var e;A.value=j(),E(A.value),null==(e=z.value)||e.clearCheck()}))},N=s((()=>D(A.value)));return o((()=>N.value),(e=>{q.value=e.map((e=>e.value)),B.onFieldChange(),console.log("onFieldChange",12)})),(e,l)=>(t(),u(v(y),{placement:"bottomLeft",trigger:"click"},{content:r((()=>[c(F,{ref_key:"nodePanelRef",ref:z,options:A.value},null,8,["options"])])),default:r((()=>[i("div",R,[c(v(_),{placeholder:"请选择"},d({_:2},[v(N).length?{name:"prefix",fn:r((()=>[(t(!0),h(b,null,p(v(N),(e=>(t(),u(v(m),{key:e.value,class:"tag-item",closable:"",onClose:f((l=>(e=>{I(!1,e.node)})(e)),["prevent"])},{default:r((()=>[g(k(e.label),1)])),_:2},1032,["onClose"])))),128)),c(v(C),{class:"clear-icon",onClick:f(L,["prevent"])},null,8,["onClick"])]))}:void 0]),1024)])])),_:1}))}}),[["__scopeId","data-v-48dca672"]]);export{q as default};
