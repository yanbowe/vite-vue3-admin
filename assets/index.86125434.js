import{d as a,k as e,L as l,J as s,A as n,b as o,c as r,e as t,B as i,D as d,z as c,O as u,M as m,b6 as p,Z as f,p as g,g as v,h,s as y,a4 as I,a7 as b,b7 as w,as as x}from"./vendor.5e124c15.js";/* empty css               *//* empty css               */import{_,a as z,c as C,g as j}from"./index.7c366795.js";const k={class:"login-box"},A={class:"login-logo"},U=(a=>(g("data-v-6acbe3cf"),a=a(),v(),a))((()=>t("h1",{class:"mb-0 ml-2 text-3xl font-bold"},"Antd Admin",-1))),S=["src"],q=h(" 登录 ");var B=_(a({setup(a){const g=e({loading:!1,captcha:"",formInline:{username:"",password:"",verifyCode:"",captchaId:""}}),v=l(),h=s(),_=z(),B=async()=>{const{id:a,img:e}=await j({width:100,height:50});g.captcha=e,g.formInline.captchaId=a};B();const D=async()=>{var a;const{username:e,password:l,verifyCode:s}=g.formInline;if(""==e.trim()||""==l.trim())return y.warning("用户名或密码不能为空！");if(!s)return y.warning("请输入验证码！");y.loading("登录中...",0),g.loading=!0,console.log(g.formInline);try{await _.login(g.formInline).finally((()=>{g.loading=!1,y.destroy()})),y.success("登录成功！"),h.replace(null!=(a=v.query.redirect)?a:"/")}catch(n){I.error({title:()=>"提示",content:()=>n.message}),B()}};return(a,e)=>{const l=b,s=w,v=n("a-button"),h=x;return o(),r("div",k,[t("div",A,[i(d(C),{name:"logo"}),U]),i(h,{layout:"horizontal",model:d(g).formInline,onSubmit:f(D,["prevent"])},{default:c((()=>[i(s,null,{default:c((()=>[i(l,{value:d(g).formInline.username,"onUpdate:value":e[0]||(e[0]=a=>d(g).formInline.username=a),size:"large",placeholder:"rootadmin"},{prefix:c((()=>[i(d(u),{type:"user"})])),_:1},8,["value"])])),_:1}),i(s,null,{default:c((()=>[i(l,{value:d(g).formInline.password,"onUpdate:value":e[1]||(e[1]=a=>d(g).formInline.password=a),size:"large",type:"password",placeholder:"123456",autocomplete:"new-password"},{prefix:c((()=>[i(d(m),{type:"user"})])),_:1},8,["value"])])),_:1}),i(s,null,{default:c((()=>[i(l,{value:d(g).formInline.verifyCode,"onUpdate:value":e[2]||(e[2]=a=>d(g).formInline.verifyCode=a),placeholder:"验证码",maxlength:4,size:"large"},{prefix:c((()=>[i(d(p))])),suffix:c((()=>[t("img",{src:d(g).captcha,class:"absolute right-0 h-full cursor-pointer",onClick:B},null,8,S)])),_:1},8,["value"])])),_:1}),i(s,null,{default:c((()=>[i(v,{type:"primary","html-type":"submit",size:"large",loading:d(g).loading,block:""},{default:c((()=>[q])),_:1},8,["loading"])])),_:1})])),_:1},8,["model","onSubmit"])])}}}),[["__scopeId","data-v-6acbe3cf"]]);export{B as default};
